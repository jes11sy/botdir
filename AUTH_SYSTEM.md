# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

1. **–î–∏—Ä–µ–∫—Ç–æ—Ä** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
2. **–ú–∞—Å—Ç–µ—Ä** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏
3. **–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - –ø–æ–ª—É—á–∞–µ—Ç "–î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç"

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `tg_id` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `director`
- –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –∏—â–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `master`
- –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∏–≥–¥–µ - –ø–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ

### 2. –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

#### –î–∏—Ä–µ–∫—Ç–æ—Ä
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- –ú–µ–Ω—é: –ó–∞—è–≤–∫–∏, –ö–∞—Å—Å–∞, –û—Ç—á–µ—Ç—ã, –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
- –ú–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –º–∞—Å—Ç–µ—Ä–∞–º–∏
- –ú–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏ –∏ –æ—Ç—á–µ—Ç—ã

#### –ú–∞—Å—Ç–µ—Ä
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ú–µ–Ω—é: –ú–æ–∏ –∑–∞—è–≤–∫–∏, –ö–∞—Å—Å–∞, –ú–æ–∏ –æ—Ç—á–µ—Ç—ã
- –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∑–∞—è–≤–∫–∏ –≤ —Å–≤–æ–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö
- –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞—Å—Å–æ–π –≤ —Å–≤–æ–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö
- –ú–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –æ—Ç—á–µ—Ç—ã

#### –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "‚ùå –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç"
- –ù–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏–∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- `src/middleware/auth.js` - middleware –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `src/handlers/master.js` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞
- `AUTH_SYSTEM.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/bot.js` - –¥–æ–±–∞–≤–ª–µ–Ω middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `src/keyboards/menus.js` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞
- `src/config/database.js` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getMasterInfo()`
- –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è middleware

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `director` –∏ `master` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ø–æ–ª—è `tg_id`:

```sql
-- –ü—Ä–∏–º–µ—Ä –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
UPDATE director SET tg_id = '123456789' WHERE id = 1;

-- –ü—Ä–∏–º–µ—Ä –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞
UPDATE master SET tg_id = '987654321' WHERE id = 1;
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
node test_auth.js
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
2. –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –º–µ–Ω—é —Å –¥–æ—Å—Ç—É–ø–æ–º –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

### –î–ª—è –º–∞—Å—Ç–µ—Ä–∞
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
2. –ü–æ–ª—É—á–∏—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –º–µ–Ω—é —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –º–∞—Å—Ç–µ—Ä–∞

### –î–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
2. –ü–æ–ª—É—á–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "‚ùå –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç"

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞/–º–∞—Å—Ç–µ—Ä–∞
- ‚ùå –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- üîç –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
- Middleware –∑–∞—â–∏—â–∞–µ—Ç –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- –†–æ–ª–∏ —Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã

## Troubleshooting

### –ë–æ—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `tg_id` –∑–∞–ø–æ–ª–Ω–µ–Ω –≤ –ë–î
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞

### –ú–∞—Å—Ç–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç –∑–∞—è–≤–∫–∏
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É –º–∞—Å—Ç–µ—Ä–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –≥–æ—Ä–æ–¥–∞ –≤ –ë–î
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞—è–≤–∫–∏ –µ—Å—Ç—å –≤ —ç—Ç–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö

### –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
